{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '42476870-3a5632db826cc102513b658b4';\nconst BASE_URL = 'https://pixabay.com';\nconst END_POINT = '/api/';\n\nexport function searchImages(search) {\n  const PARAMS = `?key=${API_KEY}&q=${search}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const url = `${BASE_URL}${END_POINT}${PARAMS}`;\n\n  return fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.hits && data.hits.length > 0) {\n        return data;\n      } else {\n        throw new Error('No images found');\n      }\n    })\n    .catch(error => {\n      throw new Error(\n        `Failed to fetch images from Pixabay API: ${error.message}`\n      );\n    });\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst lightbox = new SimpleLightbox('.img-container a', {\n  overlay: true,\n  overlayOpacity: 0.9,\n  animationSpeed: 1000,\n  scrollZoomFactor: 0.1,\n  navText: ['←', '→'],\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderMarkup(refs, pics, limit = 18) {\n  refs.infoEl.innerHTML = '';\n\n  if (!pics || pics.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n  } else {\n    pics.slice(0, limit).forEach(pic => {\n      const markup = createMarkup(pic);\n      refs.infoEl.insertAdjacentHTML('beforeend', markup);\n    });\n\n    lightbox.refresh();\n  }\n}\n\nfunction createMarkup(pic) {\n  return `<div class=\"image-box\">\n          <div class=\"general-frame\">\n\n            <div class=\"image-container\">\n              <a href=\"${pic.largeImageURL}\" data-lightbox=\"gallery\">\n              <img src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" class=\"my-image\">\n              </a>\n            </div>\n             \n            <div class=\"image-body\">\n                <ul class=\"ul-item\">\n                 <li class=\"image-li\">Likes <span style=\"font-weight: normal;\">${pic.likes}</span></li>\n                 <li class=\"image-li\">Views <span style=\"font-weight: normal;\">${pic.views}</span></li>\n                 <li class=\"image-li\">Comments <span style=\"font-weight: normal;\">${pic.comments}</span></li>\n                 <li class=\"image-li\">Downloads <span style=\"font-weight: normal;\">${pic.downloads}</span></li>\n                </ul>\n              </div>\n          </div>\n    </div>`;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport { renderMarkup } from './js/render-functions.js';\n\nconst refs = {\n  formEl: document.querySelector('.search-form'),\n  infoEl: document.querySelector('.img-container'),\n  loader: document.querySelector('.loader'),\n};\n\nrefs.formEl.addEventListener('submit', event => {\n  event.preventDefault();\n\n  refs.infoEl.innerHTML = '';\n  refs.loader.classList.remove('is-hidden'); // Показать индикатор загрузки\n\n  const query = event.currentTarget.elements.query.value.trim();\n\n  event.currentTarget.elements.query.value = ''; //очищаем поле ввода после отправки запроса\n\n  if (query === '') {\n    iziToast.error({\n      message: 'Please enter a search query',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n    return;\n  }\n\n  searchImages(query)\n    .then(data => {\n      if (data.hits && data.hits.length > 0) {\n        renderMarkup(refs, data.hits, 18); // количество изображений для отображения. Надо 18\n      } else {\n        iziToast.error({\n          message: 'No images found for the given query',\n          position: 'center',\n          transitionIn: 'fadeInLeft',\n        });\n      }\n    })\n    .catch(error => {\n      console.error(error);\n      iziToast.error({\n        message: 'Failed to fetch images. Please try again later.',\n        position: 'center',\n        transitionIn: 'fadeInLeft',\n      });\n    })\n    .finally(() => {\n      refs.loader.classList.add('is-hidden');\n    });\n});\n\nconst lightbox = new SimpleLightbox('.img-container', {\n  overlay: true,\n  overlayOpacity: 0.9,\n  animationSpeed: 1000,\n  scrollZoomFactor: 0.1,\n  navText: ['←', '→'],\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["API_KEY","BASE_URL","END_POINT","searchImages","search","PARAMS","url","response","data","error","lightbox","SimpleLightbox","renderMarkup","refs","pics","limit","iziToast","pic","markup","createMarkup","event","query"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,sBACXC,EAAY,QAEX,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAS,QAAQL,CAAO,MAAMI,CAAM,2DACpCE,EAAM,GAAGL,CAAQ,GAAGC,CAAS,GAAGG,CAAM,GAE5C,OAAO,MAAMC,CAAG,EACb,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,GAAIA,EAAK,MAAQA,EAAK,KAAK,OAAS,EAClC,OAAOA,EAEP,MAAM,IAAI,MAAM,iBAAiB,CAEzC,CAAK,EACA,MAAMC,GAAS,CACd,MAAM,IAAI,MACR,4CAA4CA,EAAM,OAAO,EACjE,CACA,CAAK,CACL,CCxBA,MAAMC,EAAW,IAAIC,EAAe,mBAAoB,CACtD,QAAS,GACT,eAAgB,GAChB,eAAgB,IAChB,iBAAkB,GAClB,QAAS,CAAC,IAAK,GAAG,EAClB,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAaC,EAAMC,EAAMC,EAAQ,GAAI,CACnDF,EAAK,OAAO,UAAY,GAEpB,CAACC,GAAQA,EAAK,SAAW,EAC3BE,EAAS,MAAM,CACb,QACE,2EACF,SAAU,SACV,aAAc,YACpB,CAAK,GAEDF,EAAK,MAAM,EAAGC,CAAK,EAAE,QAAQE,GAAO,CAClC,MAAMC,EAASC,EAAaF,CAAG,EAC/BJ,EAAK,OAAO,mBAAmB,YAAaK,CAAM,CACxD,CAAK,EAEDR,EAAS,QAAO,EAEpB,CAEA,SAASS,EAAaF,EAAK,CACzB,MAAO;AAAA;AAAA;AAAA;AAAA,yBAIgBA,EAAI,aAAa;AAAA,0BAChBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iFAMqBA,EAAI,KAAK;AAAA,iFACTA,EAAI,KAAK;AAAA,oFACNA,EAAI,QAAQ;AAAA,qFACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,WAKlG,CC5CA,MAAMJ,EAAO,CACX,OAAQ,SAAS,cAAc,cAAc,EAC7C,OAAQ,SAAS,cAAc,gBAAgB,EAC/C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEAA,EAAK,OAAO,iBAAiB,SAAUO,GAAS,CAC9CA,EAAM,eAAc,EAEpBP,EAAK,OAAO,UAAY,GACxBA,EAAK,OAAO,UAAU,OAAO,WAAW,EAExC,MAAMQ,EAAQD,EAAM,cAAc,SAAS,MAAM,MAAM,OAIvD,GAFAA,EAAM,cAAc,SAAS,MAAM,MAAQ,GAEvCC,IAAU,GAAI,CAChBL,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,SACV,aAAc,YACpB,CAAK,EACD,MACD,CAEDb,EAAakB,CAAK,EACf,KAAKb,GAAQ,CACRA,EAAK,MAAQA,EAAK,KAAK,OAAS,EAClCI,EAAaC,EAAML,EAAK,KAAM,EAAE,EAEhCQ,EAAS,MAAM,CACb,QAAS,sCACT,SAAU,SACV,aAAc,YACxB,CAAS,CAET,CAAK,EACA,MAAMP,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBO,EAAS,MAAM,CACb,QAAS,kDACT,SAAU,SACV,aAAc,YACtB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbH,EAAK,OAAO,UAAU,IAAI,WAAW,CAC3C,CAAK,CACL,CAAC,EAEgB,IAAIF,EAAe,iBAAkB,CACpD,QAAS,GACT,eAAgB,GAChB,eAAgB,IAChB,iBAAkB,GAClB,QAAS,CAAC,IAAK,GAAG,EAClB,aAAc,MACd,aAAc,GAChB,CAAC"}